# OS-1
Assignment using semaphores
Διανέλλος Στέφανος
1115201500036
Compile προγράμματος: make
Για να τρέξουμε το πρόγραμμα: ./main argument
Το πρόγραμμα ξεκινάει αρχικοποιώντας τους σημαφόρους και τις κοινές μνήμες.Στη συνέχεια κάνω
8 fork.Οι πρώτες 3 fork είναι οι διεργασίες των constructors.Η 4η διεργασία είναι η διεργασία του
βαφείου, η 5η, η 6η και η 7η είναι οι διεργασίες των ελέγχων και η 8η είναι η εργασία του
assembler.Χρησιμοποιώ ένα σημαφόρο για τους constructors οι οποίος αρχικοποιείται με 1,
επιτρέποντας στους construcstors να δημιουργήσουν κάποιο εξάρτημα.. Με το που ξεκινήσει ένας
constructor κάνει sem_down έτσι ώστε να μπλοκάρει τους άλλους constructors. Μόλις
δημιουργηθεί το πρώτο εξάρτημα, περνάει στην κοινή μνήμη τα στοιχεία του εξαρτήματος και
κάνει sem_up τον σημαφόρο του βαφείου για να ξεκινήσει η διαδικασία βαφής του αντικειμένου.Το
βαφείο στη συνέχεια κάνει sem_down τον σημαφόρο του , έως ότου γίνει πάλι sem_up από κάποιον
constructor. Το βαφείο περνάει τα στοιχεία του εξαρτήματος σε μία δομή και στη συνέχεια ανάλογα
με τον τύπο τα περνάει σε άλλη κοινή μνήμη, ενεργοποιεί τον ελέγχο του συγκεκριμένου
εξαρτήματος και κάνει sem_up τους constructors. Ο έλεγχος αφού λάβει το εξάρτημα,κάνει
sem_down το σημαφόρο μεταξύ βαφείου και του συγκεκριμένου ελέγχου και το περνάει σε ένα
array, Στη συνέχεια κάνει sem_down το σημαφόρου μεταξύ ελέγχου και assembler, ο οποίος “λέει”
στον έλεγχο ότι ο assember έχει λάβει το εξάρτημα και είναι έτοιμος να λάβει ξανά εξάρτημα ίδιου
τύπου. Τέλος κάνει sem_up ένα δεύτερο σημαφόρο ίδιου τύπου, ο οποίος όμως λέει στον assembler
ότι το εξάρτημα έχει τελειώσει με τον έλεγχο και είναι έτοιμο για παραλαβή. Ο assembler, αφού
γίνει sem_up από τον έλεγχο παίρνει τα εξαρτήματα(κάθε φόρα από ένα εξάρτημα ενός τύπου) και
τα περνάει σε ένα πίνακα.Αφού λάβει και τα 3 εξαρτήματα δημιουργεί το τελικό προιόν και κάνει
sem_up τους σημαφόρους των ελέγχων για να στείλουν κι άλλο εξάρτημα. Η διαδικασία
επαναλαμβάνεται μέχρι να δημιουργηθεί το τελευταίο εξάρτημα.
